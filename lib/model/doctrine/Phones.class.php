<?php

/**
 * Phones
 *
 * This class has been auto-generated by the Doctrine ORM Framework
 *
 * @package    hekphone
 * @subpackage model
 * @author     Your name here
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Phones extends BasePhones
{
	
	public function createPhoneConfigFile($overrideUserSettings = false)
	{

		$configFileContent = get_partial('global/tiptel88PhoneConfiguration', array('ip' => $this['defaultip'],
                                                                             'sip1PhoneNumber' => $this['name'],
                                                                             'sip1DisplayName' => $this['callerid'],
                                                                             'sip1User' => $this['defaultuser'],
		                                                                     'sip1Pwd' => $this['Rooms']['Residents']['password'],
		                                                                     'overrideUserSettings' => $overrideUserSettings));
		
		
		$fileprefix = sfConfig::get("sf_data_dir") . DIRECTORY_SEPARATOR . "phoneConfigs" . DIRECTORY_SEPARATOR . $this['name'];
		$ctl_handler = fopen($fileprefix . "-config.txt", "w+"); // Create file
		fWrite($ctl_handler, $configFileContent);
		return $fileprefix."-config.txt";
	}
}
